<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.154.5"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>ShellUnease (VXXDXX)</title>

<meta name="description" content="ShellUnease Write-ups">
<meta name="author" content="ShellUnease">
<link rel="canonical" href="http://localhost:1313/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css" integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/index.xml">
<link rel="alternate" type="application/json" href="http://localhost:1313/index.json">
<link rel="alternate" hreflang="en" href="http://localhost:1313/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="ShellUnease (VXXDXX) (Alt + H)">ShellUnease (VXXDXX)</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<article class="first-entry home-info">
    <header class="entry-header">
        <h1>Hi üëã</h1>
    </header>
    <div class="entry-content">
        Welcome to my collection of write-ups. You can also read them and more at <a href="https://valgrindc.tf">valgrind CTF team website</a>.
    </div>
    <footer class="entry-footer">
        <div class="social-icons" >
    <a href="https://x.com/VXXDXX4XLL" target="_blank" rel="noopener noreferrer me"
        title="Twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z">
    </path>
</svg>
    </a>
    <a href="https://github.com/ShellUnease" target="_blank" rel="noopener noreferrer me"
        title="GitHub">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
    </a>
    <a href="https://app.hackthebox.com/users/1689134" target="_blank" rel="noopener noreferrer me"
        title="HTB">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg>
    </a>
</div>

    </footer>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Migrating My Notes With cherrytree2trilium
    </h2>
  </header>
  <div class="entry-content">
    <p>Intro I had a quite large (~363MB) CherryTree database that I wanted to convert to Trilium. I stumbled upon the cherrytreetomarkdown project, modified it a bit and used it alongside trilium-py to suit my needs. This project may or may not lack some migration features, but it allowed me to successfully migrate my CherryTree database to Trilium and I figured out it might help others too. The project is available here.
Usage Install Trilium, Get the ETAPI token from Hidden Notes / Options / ETAPI, ...</p>
  </div>
  <footer class="entry-footer"><span title='2026-01-28 20:29:03 +0100 CET'>January 28, 2026</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;ShellUnease</footer>
  <a class="entry-link" aria-label="post link to Migrating My Notes With cherrytree2trilium" href="http://localhost:1313/posts/cherrytree2trilium/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">ASIS CTF Finals 2025 One shoot game!
    </h2>
  </header>
  <div class="entry-content">
    <p>Overview Can you one shoot me?
Solves: 10
1. General Analysis The application is written in Python and uses Flask. Each time the bot is called, it will create an account with random credentials, log in, create a new note with the target flag in its content, and then visit our note. The endpoint to display a note /display/&lt;string:doc_id&gt; only requires that we‚Äôre logged in, but as long as we know its id we can view any note. 2. Broken DOMPurify Sanitization The file src/app/templates/workspace/display.html contains the following script.
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-12-28 20:22:53 +0100 CET'>December 28, 2025</span>&nbsp;¬∑&nbsp;6 min&nbsp;¬∑&nbsp;ShellUnease</footer>
  <a class="entry-link" aria-label="post link to ASIS CTF Finals 2025 One shoot game!" href="http://localhost:1313/posts/asisctffinals-2025-oneshootgame/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">PwnSecCTF 2025 PSPD
    </h2>
  </header>
  <div class="entry-content">
    <p>Overview They begged me not to do it, but I had to. Can you bring PwnSec‚Äôs Police Department to a clojure?
Challenge author: aelmo
Solves: 2
1. General Analysis The application is written in Clojure, however the challenge doesn‚Äôt involve anything specific to it. The flag is located in the admin bot‚Äôs journal. It‚Äôs not protected by any auth check - all we have to do is learn the admin‚Äôs user id.
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-11-23 12:11:39 +0200 +0200'>November 23, 2025</span>&nbsp;¬∑&nbsp;6 min&nbsp;¬∑&nbsp;ShellUnease</footer>
  <a class="entry-link" aria-label="post link to PwnSecCTF 2025 PSPD" href="http://localhost:1313/posts/pwnsecctf-2025-pspd/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">SekaiCTF 2025 hqli-me
    </h2>
  </header>
  <div class="entry-content">
    <p>Overview Please note that this challenge has no outgoing network access.
Challenge author: irogir
Solves: 3
Fun challenge focused mostly on RCE via HQL.
1. General Analysis The challenge deployment consists of 3 containers:
order_service, authn_service containing the flag, mysql We can reach any container from within another, but only order_service is exposed externally. Both order_service and authn_service are Java applications that use HQL to query the underlying databases; however, order_service uses mysql from another container, while authn_service opted for an in-memory H2 db.
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-08-27 20:11:39 +0200 CEST'>August 27, 2025</span>&nbsp;¬∑&nbsp;13 min&nbsp;¬∑&nbsp;ShellUnease</footer>
  <a class="entry-link" aria-label="post link to SekaiCTF 2025 hqli-me" href="http://localhost:1313/posts/sekaictf-2025-hqli-me/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">R3CTF 2025 R3note
    </h2>
  </header>
  <div class="entry-content">
    <p>Overview In the dawning age of the ARPANET‚Äôs gleam
A simple idea, a persistent dream
From a humble note, in ‚Äò69 it came
Steve Crocker wrote it, and whispered its name
A ‚ÄúRequest for Comments,‚Äù a title so grand
To build the foundation across the land
From a simple memo, a legacy grew
To connect the world, for me and for you.
Solves: 10
This write-up describes a series of vulnerabilities in the r3note application that, when chained together, lead to XSS. The vulnerabilities include a file upload bypass, a path traversal, nginx misconfiguration and an XSS vulnerability.
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-07-20 20:11:39 +0200 CEST'>July 20, 2025</span>&nbsp;¬∑&nbsp;7 min&nbsp;¬∑&nbsp;ShellUnease</footer>
  <a class="entry-link" aria-label="post link to R3CTF 2025 R3note" href="http://localhost:1313/posts/r3ctf-2025-r3note/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">KalmarCTF 2025 RWX Gold
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p>Intro This post covers RWX Gold from KalmarCTF 2024.
We give you file read, file write and code execution. But can you get the flag? Let‚Äôs reduce that.
Analysis The following is the source code of the application:
from flask import ( Flask, json, jsonify, request, render_template, ) from pathlib import Path from uuid import uuid4, UUID import os from werkzeug.exceptions import NotFound, BadRequest, Forbidden import subprocess app = Flask(__name__) storage_path = Path(__file__).parent / &#34;storage&#34; os.system(&#34;podman pull docker.io/library/gcc:latest&#34;) @app.get(&#34;/&#34;) def get_index(): return render_template(&#34;index.html&#34;) @app.get(&#34;/&lt;id&gt;&#34;) def get_result(id): id = str(UUID(id)) try: code = Path(storage_path, id, &#34;main.c&#34;).read_text() output = Path(storage_path, id, &#34;output.txt&#34;).read_text() except FileNotFoundError: raise NotFound() if output == &#34;&#34;: output = &#34;[no output yet, try refreshing]&#34; return render_template(&#34;result.html&#34;, code=code, output=output) @app.post(&#34;/run&#34;) def post_run(): if request.json is None: raise UnsupportedMediaType() code = request.json[&#34;code&#34;] if not isinstance(code, str): raise BadRequest() id = run_code(code) return jsonify({&#34;id&#34;: id}) def run_code(code): if len(code) &gt; 10000: raise Forbidden() id = uuid4() folder = Path(storage_path, str(id)) folder.mkdir(parents=True) Path(folder, &#34;main.c&#34;).write_text(code) os.system( f&#34;podman run --timeout 5 --detach -v {str(folder.absolute())}:/mnt --workdir /mnt gcc &#34; &#43; &#34;sh -c &#39;gcc main.c &gt; output.txt 2&gt;&amp;1 &amp;&amp; ./a.out | head -c 1000 &gt;&gt; output.txt&#39;&#34; ) subprocess.Popen(f&#34;sleep 60; rm -r {folder.absolute()}&#34;, shell=True) return id print(&#34;started&#34;) As we can see, there are 2 main endpoints: @app.post(&#34;/run&#34;) amd @app.get(&#34;/&lt;id&gt;&#34;). The first one is used to compile our source code and run it, all in a podman pod and the second one is used to display the source code that was compiled and executed alongside the output.
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-03-09 18:00:00 +0100 CET'>March 9, 2025</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;ShellUnease</footer>
  <a class="entry-link" aria-label="post link to KalmarCTF 2025 RWX Gold" href="http://localhost:1313/posts/kalmarctf-2025-rwx-gold/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">BuckeyeCTF 2024 Free C Compiler Online
    </h2>
  </header>
  <div class="entry-content">
    <p>Intro This post covers Free C Compiler Online from BuckeyeCTF 2024. The description of the challenge is as follows:
It is free of charge, but is it free of bugs?
No, it‚Äôs not.
Analyzing The Source Code The following is the source code of the application:
from flask import ( Flask, json, jsonify, request, render_template, ) from pathlib import Path from uuid import uuid4, UUID import os from werkzeug.exceptions import NotFound, BadRequest, Forbidden import subprocess app = Flask(__name__) storage_path = Path(__file__).parent / &#34;storage&#34; os.system(&#34;podman pull docker.io/library/gcc:latest&#34;) @app.get(&#34;/&#34;) def get_index(): return render_template(&#34;index.html&#34;) @app.get(&#34;/&lt;id&gt;&#34;) def get_result(id): id = str(UUID(id)) try: code = Path(storage_path, id, &#34;main.c&#34;).read_text() output = Path(storage_path, id, &#34;output.txt&#34;).read_text() except FileNotFoundError: raise NotFound() if output == &#34;&#34;: output = &#34;[no output yet, try refreshing]&#34; return render_template(&#34;result.html&#34;, code=code, output=output) @app.post(&#34;/run&#34;) def post_run(): if request.json is None: raise UnsupportedMediaType() code = request.json[&#34;code&#34;] if not isinstance(code, str): raise BadRequest() id = run_code(code) return jsonify({&#34;id&#34;: id}) def run_code(code): if len(code) &gt; 10000: raise Forbidden() id = uuid4() folder = Path(storage_path, str(id)) folder.mkdir(parents=True) Path(folder, &#34;main.c&#34;).write_text(code) os.system( f&#34;podman run --timeout 5 --detach -v {str(folder.absolute())}:/mnt --workdir /mnt gcc &#34; &#43; &#34;sh -c &#39;gcc main.c &gt; output.txt 2&gt;&amp;1 &amp;&amp; ./a.out | head -c 1000 &gt;&gt; output.txt&#39;&#34; ) subprocess.Popen(f&#34;sleep 60; rm -r {folder.absolute()}&#34;, shell=True) return id print(&#34;started&#34;) As we can see, there are 2 main endpoints: @app.post(&#34;/run&#34;) amd @app.get(&#34;/&lt;id&gt;&#34;). The first one is used to compile our source code and run it, all in a podman pod and the second one is used to display the source code that was compiled and executed alongside the output.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-09-30 00:19:51 +0200 CEST'>September 30, 2024</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;ShellUnease</footer>
  <a class="entry-link" aria-label="post link to BuckeyeCTF 2024 Free C Compiler Online" href="http://localhost:1313/posts/buckeyectf-2024-free-c-compiler-online/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">PatriotCTF 2024 Abnormal Maybe Illegal
    </h2>
  </header>
  <div class="entry-content">
    <p>Intro This post covers Abnormal Maybe Illegal from PatriotCTF 2024. The description of the challenge is:
We have recently discovered tons of traffic leaving our network. We have reason to believe they are using an abnormal method. Can you figure out what data they are exfiltrating?
Furthermore, two additional hints were released throughout the competition:
TCP packets are constructed in a way, where certain combinations are possible/(legal) and others should raise alerts/(illegal)
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-09-24 23:46:16 +0200 CEST'>September 24, 2024</span>&nbsp;¬∑&nbsp;6 min&nbsp;¬∑&nbsp;ShellUnease</footer>
  <a class="entry-link" aria-label="post link to PatriotCTF 2024 Abnormal Maybe Illegal" href="http://localhost:1313/posts/patrioctf-2024-abnormal-maybe-illegal/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">CSAW CTF Qualification Round 2024 Literally 1984 &amp; Mystery
    </h2>
  </header>
  <div class="entry-content">
    <p>Intro This post covers both Literally 1984 and Mystery as they‚Äôre related to each other. The description of Literally 1984 is:
An artist by the name of ‚Äå made a cover of a song I liked, but I don‚Äôt remember the original composer of that song. Could you help me find the original composer? Flag Format: csawctf{Firstname_Lastname} (replace all spaces with _ )
and the description of Mystery is:
Remember the composer from Literally 1984? Well, they made a song when they were part of a band in 1992, and it turns out that ‚Äå also made a cover of this song, collabing with another artist. What is the name of that artist? Flag Format: csawctf{ArtistName} (replace all spaces with _ )
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-09-07 12:17:59 +0200 CEST'>September 7, 2024</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;ShellUnease</footer>
  <a class="entry-link" aria-label="post link to CSAW CTF Qualification Round 2024 Literally 1984 & Mystery" href="http://localhost:1313/posts/csawctf-2024-literally-1984-mystery/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">CSAW CTF Qualification Round 2024 BucketWars
    </h2>
  </header>
  <div class="entry-content">
    <p>Intro For this challenge we‚Äôre only given the link https://bucketwars.ctf.csaw.io and the description:
let‚Äôs keep our storage simple ‚Äì and remember we don‚Äôt make mistakes in these parts.
Enumerating the Website Upon visiting the website, we notice the current version Version: 5.0.0 and the versions page.
When we visit a page that doesn‚Äôt exist, it tells us that the 404.jpg is missing from an S3 bucket https://s3.us-east-2.amazonaws.com/bucketwars.ctf.csaw.io. We try accessing index.html and versions.html by using this S3 bucket URL and confirm the website files are served from there.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-09-07 12:17:33 +0200 CEST'>September 7, 2024</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;ShellUnease</footer>
  <a class="entry-link" aria-label="post link to CSAW CTF Qualification Round 2024 BucketWars" href="http://localhost:1313/posts/csawctf-2024-bucket-wars/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="http://localhost:1313/page/2/">Next&nbsp;&nbsp;¬ª
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>ShellUnease (CC BY 4.0)</span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>
<script src="/js/medium-zoom-1.1.0.min.js"></script>

<script>
 const images = Array.from(document.querySelectorAll("article img"));
 images.forEach(img => {
   mediumZoom(img, {
    
     background: 'rgba(128, 128, 128, 0.5)', 
     margin: 0,  
     scrollOffset: 40,  
     container: null,  
     template: null  
   });
 });
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
